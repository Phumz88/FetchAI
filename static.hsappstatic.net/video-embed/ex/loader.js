!function(){"use strict";const e=9/16;let t;!function(e){e.SET_UTK="SET_UTK";e.SET_PAGE_META="SET_PAGE_META";e.SET_CURRENT_TIME="SET_CURRENT_TIME";e.SET_PLAYBACK_RATE="SET_PLAYBACK_RATE";e.UPDATE_DISPLAY_OPTIONS="UPDATE_DISPLAY_OPTIONS";e.SET_PLAYER_STATUS="SET_PLAYER_STATUS";e.CONFIRM_VISIBLE="CONFIRM_VISIBLE";e.CTA_SKIPPED="CTA_SKIPPED";e.CTA_CLICKED="CTA_CLICKED";e.FORM_SKIPPED="FORM_SKIPPED";e.FORM_SUBMITTED="FORM_SUBMITTED";e.VIDEO_LOADED="VIDEO_LOADED";e.PLAYER_LOADED="PLAYER_LOADED";e.PLAYER_READY="PLAYER_READY";e.PLAYER_PLAY="PLAYER_PLAY";e.PLAYER_PAUSE="PLAYER_PAUSE";e.PLAYER_ENDED="PLAYER_ENDED";e.PLAYER_PROGRESS="PLAYER_PROGRESS";e.PLAYER_TIME_UPDATE="PLAYER_TIME_UPDATE";e.PLAYER_SHOW_OVERLAY="PLAYER_SHOW_OVERLAY";e.PLAYER_ORPHANED="PLAYER_ORPHANED";e.PLAYER_ERROR="PLAYER_ERROR";e.PLAYER_ANALYTICS_EVENTS="PLAYER_ANALYTICS_EVENTS";e.PLAYER_SECONDS_VIEWED="PLAYER_SECONDS_VIEWED";e.TRACKED_PLAY="TRACKED_PLAY";e.TRIGGER_AUTOPLAY="TRIGGER_AUTOPLAY"}(t||(t={}));const o=["region","posterUrl","playButtonColor","play_button_color","playButtonShape","play_button_shape","preview","richTextPreview","playerType","autoplay","autoPlay","subtitleLanguage","enablePictureInPicture","enableVideoFrameHotKeys","enableAutoPlayToggle","loop","muted","hiddenControls","hidden_controls","hostApp","renderContext","parentUrl","maxHeight","objectFit","playbackRate"],n=1e3,i="/share/hubspotvideo/",r=0,s=-1,a={INITIAL:"INITIAL",LOADING:"LOADING",READY:"READY",PLAYING:"PLAYING",PAUSED:"PAUSED",ENDED:"ENDED",CONVERSION_ASSET_OVERLAY:"CONVERSION_ASSET_OVERLAY",ERROR:"ERROR"};let l,d;!function(e){e.FORM="FORM";e.CTA="CTA"}(l||(l={}));!function(e){e.PRE="PRE";e.POST="POST";e.CUSTOM="CUSTOM"}(d||(d={}));const c={DEFAULT:"hsvideo-mux",VIDEOJS_RAW_URL:"videojs-raw-url",HTML5:"html5",IN_APP_PREVIEW:"inAppPreview",EDITOR_PREVIEW:"editorPreview",RICH_TEXT_PREVIEW:"richTextPreview",ACADEMY_IN_APP:"academy",ACADEMY_EMBEDDED:"academyEmbedded"},u="VIDEO_PLAYER_ENV",h="-qa.js",p=[".hubspotqa.com",".hubspotvideoqa.com",".hsappstatic.net"],f=/http(s?):\/\/(app|local)(-\w+)?.hubspot(qa)?.com/;let m=!1;function g(e,t=!0){if(!t&&m)return null;try{return localStorage.getItem(e)}catch(e){m=!0;return null}}const E=()=>window[u];function b(){return E()?"local"===E():"local"===g(u)||!!window.location.search.includes("_hsVideoEnv=local")}function y(){if(qe()||"qa"===g(u))return!0;if(E())return"qa"===E();const e=N();return p.some((e=>window.location.hostname.endsWith(e)))||e&&e.endsWith(h)}function v(e={}){const t=e.region||Ye(),o=t?`-${t}`:"";if("prod"===e.env)return`https://${b()?"local":`play${o}`}.hubspotvideo.com`;if(A()&&e.playerType!==c.ACADEMY_IN_APP&&e.playerType!==c.ACADEMY_EMBEDDED){if(y()&&!b()&&!Ye())return"https://app.hubspotqa.com";if(!e.region&&!e.env)return window.location.origin}if(b())return y()?"https://local.hubspotvideoqa.com":"https://local.hubspotvideo.com";return`https://play${o}.${y()||"qa"===e.env?"hubspotvideoqa.com":"hubspotvideo.com"}`}function w(){return"jasmineRequire"in window}function A(e){return!(w()&&!e)&&Boolean((e||window.location).origin.match(f))}function P(){return Boolean(g("selenium.disable.alarms"))}const _="hs_video_debug";function I(){return!!(b()||window.hsVideoDebug||window.location.search.includes("debug=true"))||"true"===g(_)}function R(...e){if(I()){const t=e.shift();console.log.apply(console,[`[hs-video] ${t}`,...e])}}const T="hs-script-loader",S="/hs/scriptloader/",L=/video-embed\/ex\/loader(-qa)?.js/,O=/video-embed\/static(?:-[\w.-]+)?\/bundles\/loader.js$/,C=`${"div.hs-video-widget[data-hsv-embed-id]"}:not([data-hsv-status])`,$="iframe[data-hsv-src]",D="iframe[data-hsv-id][src]";function M(e){return[].slice.call(document.querySelectorAll(e))}function x(e,t){return[].slice.call(e.querySelectorAll(t))}function k(){return M("script[src]").find((e=>L.test(e.src)||O.test(e.src)))}function V(){const e=document.getElementById(T);if(e&&e.src&&e.src.includes(S)){const t=document.createElement("a");t.href=e.src;const o=t.pathname.replace(S,"").replace(".js",""),n=Number(o);if(n>0)return n}return null}function N(){const e=k();return e?e.src:null}function q(e,t=!1){return t?document.querySelector(`[data-hsv-embed-id="${e}"]:not([data-hsv-status])`):document.querySelector(`[data-hsv-embed-id="${e}"]`)}function Y(){return"interactive"===document.readyState||"complete"===document.readyState}const U=1e4;function j(e,t){const o=document.createElement("script");return new Promise(((n,i)=>{let r=!1;o.onload=()=>{r=!0;n()};o.onerror=()=>i(new Error(`loadScript failed for: ${e}`));o.src=e;t&&Object.keys(t).forEach((e=>o.setAttribute(e,t[e])));document.getElementsByTagName("head")[0].appendChild(o);setTimeout((()=>{r||i(new Error(`loadScript timed out for: ${e}`))}),U)}))}function F(e,t={}){e instanceof HTMLElement&&Object.assign(e.style,t)}function B(e,t){t.startsWith(".")||(t=`.${t}`);for(;e&&e.parentElement;){if(e.parentElement.matches&&e.parentElement.matches(t))return e.parentElement;e=e.parentElement}return null}function H(e,t){return Boolean(B(e,t))}function W(e){const t=e.getBoundingClientRect();return t.bottom>0&&t.right>0&&t.left<window.innerWidth&&t.top<window.innerHeight}function G(e){const{backgroundColor:t}=getComputedStyle(e);return"transparent"===t||"rgba(0, 0, 0, 0)"===t}function K(e){const t=document.createElement("iframe");t.src=`${v()}/video-preloader/${Ne()}`;F(t,{display:"none",width:0,height:0,border:"0 none"});R("Created preloader iframe",t);t.addEventListener("load",(()=>{R("Preloader iframe loaded, removing from page.");t.remove();e()}));document.body.appendChild(t)}const Q="na1",J={APP:"app",APP_API:"app-api"};function z(e,t){const o=t&&t.hubletOverride?t.hubletOverride:e,n=t&&!0===t.hubletizeNa1;return o!==Q||n?`-${o}`:""}function X(e,t,o){if(o&&o.hubletPostfixLocation&&"domain"===o.hubletPostfixLocation)return t;t===J.APP_API&&(t=J.APP);return`${t}${z(e,o)}`}function Z(e,t,o){return`${te(o)}${ee(t,o)}${oe(e,o)}`}function ee(e,t){return"qa"===(t&&t.envOverride?t.envOverride:e)?"qa":""}function te(e){return e&&e.domainOverride?e.domainOverride:"hubspot"}function oe(e,t){return t&&t.hubletPostfixLocation&&"domain"===t.hubletPostfixLocation?z(e,t):""}function ne(e){return e&&e.tldOverride?e.tldOverride:"com"}function ie(e){return e===J.APP_API?"/api":""}function re(e,t,o,n){return`https://${X(t,e,n)}.${Z(t,o,n)}.${ne(n)}${ie(e)}`}const se="outpost",ae=({hublet:e=Q,isQa:t=!1}={})=>`${re("forms",e.length>0?e:Q,t?"qa":"prod",{domainOverride:"hubspot"})}/${se}`,le=({hublet:e=Q,isQa:t=!1}={})=>`${re("exceptions",e.length>0?e:Q,t?"qa":"prod",{domainOverride:"hs-embed-reporting"})}/${se}`;function de(e,...t){let o,n=0;e=e||{};for(;n<t.length;)if(t[n]){for(o in t[n])t[n].hasOwnProperty(o)&&(e[o]=t[n][o]);n++}else n++;return e}function ce(e,t){if(!t)return!1;for(let o=0;o<e.length;o++)if(t.indexOf(e[o])>-1)return!0;return!1}function ue(e){let t="";for(const o in e)e.hasOwnProperty(o)&&(t+=`${o}=${e[o]};`);return t}const he=({isEmbedApp:e=!1,env:t="PROD",hublet:o=""})=>{const n="PROD"!==t;return e?le({isQa:n,hublet:o}):ae({isQa:n,hublet:o})};class pe{constructor(e,t){t=t||{};e||console.warn("The projectName parameter is required");this.projectName=e;this.env=(t.env||"PROD").toUpperCase();this.hublet=t.hublet||"";this.isEmbedApp=t.isEmbedApp||!1;this.level=(t.level||"ERROR").toUpperCase();this.disabled=t.disabled||!1;this.baseUrl=t.baseUrl||he({isEmbedApp:this.isEmbedApp,env:this.env,hublet:this.hublet});this.tags=t.tags||{};this.cookies=t.cookies||{};this.user=t.user||{}}bindToWindow(e=[],t=[]){e.length<1?console.warn("You need to specify allowlisted domains when binding to window errors or you will catch all page errors"):window.onerror=(o,n,i,r,s)=>{n&&ce(e,n)&&!ce(t,s.message)&&"script error"!==o.toLowerCase()&&this.sendReport("error",o,n,s)}}report(e,t,o={}){if(e){o.silent&&console.error(e);this.sendReport("error",e.message,e.fileName,e,t)}}reportMessage(e,t,o={}){if(e){o.silent&&console.error(e);this.sendReport("info",e,window.location.href,void 0,t)}}debug(e,t){if(e&&"DEBUG"===this.level){console.debug(e);this.sendReport("debug",e.message,e.fileName,e,t)}}addTags(e){de(this.tags,e)}addCookies(e){de(this.cookies,e)}addUserContext(e){de(this.user,e)}sendReport(e,t,o,n,i){if(this.disabled){console.warn("Not reporting error to Outpost because logging is disabled");return}o=o||(window.document.currentScript?window.document.currentScript.src:null)||window.location.href;const r=this.buildReport(e,t,o,n,i),s=new Image,a=encodeURIComponent(JSON.stringify(r));s.src=`${this.baseUrl}/${this.projectName}/error.gif?report=${a}`;s.onload=()=>{console.log(`Completed reporting error to ${this.projectName}`)}}buildReport(e,t,o,n,i={}){const r=n?n.name:"Message";let s;s=n&&n.message?n.message.substring(0,999):t.substring(0,999);return{culprit:r,message:s,level:e,exception:[{type:r,value:n&&n.stack&&n.stack.substring(0,999)||s,url:o}],request:{url:`${window.location.protocol}//${window.location.host+window.location.pathname}`,queryString:window.location.search.replace(/(^\?)/,""),cookies:ue(this.cookies)},environment:this.env,tags:de(this.tags),user:this.user,extra:i}}}var fe=pe;const me=5;let ge,Ee=0;function be(){ge||(ge=new fe("video-embed",{env:qe()?"qa":null,debug:I(),tags:{domain:window.location.origin,portalId:Ne()||void 0,hublet:Ye()||void 0}}));return ge}function ye(){return!(w()||P()||Ee>=me)}function ve(e,t={}){R("Reporting message to outpost",e);if(ye()){be().reportMessage(e,t);Ee++}}function we(e,t={}){R("Reporting error to outpost",e);if(ye()){be().report(e,t);Ee++}}const Ae=["api","local","app","private","platform","tools","meetings","payments","mcp"],Pe=["hubspotstarter","hubspotfree","hubspotemail"],_e=["growth"],Ie={com:["hubspot","hubteam","grader","getsignals","getsidekick","gettally","hubspotemail","customer-hub","hubspotservicehub","hubspotquote","hubspotdocuments","hs-data-privacy"].join("|"),net:Pe.join("|"),org:_e.join("|")},Re=function e(t){const o=new RegExp(`^(?!local|test|selenium)(.*\\.)?(${Object.entries(Ie).map((([e,t])=>`(?:${t})(qa)?\\.${e}`)).join("|")}|(?:connect)\\.com|(?:connect)(qa)\\.co|wthubspot\\.(com|de|es|fr|jp))$`).test(t.hostname),n=new RegExp(`${Object.entries(Ie).map((([e,t])=>`(?:${t})qa\\.${e}`)).join("|")}|(?:connect)qa\\.co|wthubspot\\.(com|de|es|fr|jp)|hsqa-sales(?:crm)?-sub\\.com|(?:hubspotstarter|hubspotfree|hubspotemail)(qa)(?:-.*)\\.net|(?:hubspotemail)(qa)(?:-.*)\\.com`),i=[new RegExp(`^(?:${Ae.join("|")})-(.*).(?:hubspot|hubteam)(?:qa)?.com`),new RegExp("^(.*).(?:hubspotquote)(?:qa)?.com"),new RegExp("^app-(.*).(?:hubspotdocuments)(?:qa)?.com"),new RegExp("^(?:[0-9]+).(.*).hs(?:qa)?-sales(?:crm)?-sub.com"),new RegExp("^hs-(?:[0-9]+).s.(?:hubspotfree|hubspotstarter|hubspotemail)(?:qa)?-(.*).net"),new RegExp("^hs-(?:[0-9]+).s.(?:hubspotemail)(?:qa)?-(.*).com"),new RegExp("^t.sidekickopen(?:\\d)+-([a-z]+[0-9]).com"),new RegExp("^([a-z]+[0-9]).hs-data-privacy(?:qa)?.com")],r="ENV",s="Enviro error: the default argument for .get and .getShort is no longer supported",a=e=>{let t=window[e];if(null==t)try{t=window.sessionStorage.getItem(e)}catch(e){}if(null==t)try{t=window.localStorage.getItem(e)}catch(e){}return t},l=()=>{const e=a(r);return e||(n.test(t.host)?"qa":"prod")},d=(e,t)=>{window[e]=t;return t},c={prod:"production",qa:"development"},u=e=>{if("string"==typeof e){const t=e.toLowerCase();return c[t]||t}return e},h=e=>{e="string"==typeof e?e.toLowerCase():void 0;return Object.keys(c).find((t=>e===c[t]))||e},p=(e,t)=>{if(null!=t)throw new Error(s);let o=null;if(e){const t=e.split(".").reverse();for(let e=0;e<t.length;e++){const n=t[e];o=a(`${n.toUpperCase()}_ENV`);if(o)break}}if(null==o){const e=l();o=null!=e?e:"qa"}return u(o)},f=function(e,t){if(1===arguments.length){t=e;e=r}return d(e,t)},m=(e,t)=>{if(null!=t)throw new Error(s);return h(p(e))},g=m,E=e=>"prod"===g(e),b=e=>"qa"===g(e),y=()=>{const e=a("HUBLET");if(e)return e;for(const e of i)if(e.test(t.hostname))return e.exec(t.hostname)[1];return"na1"};function v({isNa1:e,isNonNa1:t},o){o||(o=y());return"na1"===o?"function"==typeof e?e(o):void 0:"function"==typeof t?t(o):void 0}return{createEnviro:e,debug:(e,t=!1)=>{let o;"string"==typeof e&&(o=a(`${e.toUpperCase()}_DEBUG`));null==o&&(o=a("DEBUG"));return null==o?t:o},denormalize:h,deployed:e=>{let t;"string"==typeof e&&(t=a(`${e.toUpperCase()}_DEPLOYED`));null==t&&(t=a("DEPLOYED"));return null==t?o:!!t},enabled:(e,t=!1)=>{let o=a(`${e.toUpperCase()}_ENABLED`);null==o&&(o=JSON.stringify(t));return"true"===`${o}`.toLowerCase()},get:p,getHublet:y,getInternal:m,getShort:g,isProd:E,isQa:b,ifHublet:v,normalize:u,set:f,setDebug:(e,t=!0)=>{if("string"==typeof e)try{t?localStorage.setItem(`${e.toUpperCase()}_DEBUG`,JSON.stringify(!0)):localStorage.removeItem(`${e.toUpperCase()}_DEBUG`)}catch(o){d(`${e.toUpperCase()}_DEBUG`,t||void 0)}else{t=null==e||e;try{t?localStorage.setItem("DEBUG",JSON.stringify(t)):localStorage.removeItem("DEBUG")}catch(e){d("DEBUG",t||void 0)}}}}};Re(document.location);function Te(e,t=[]){return Object.keys(e).filter((e=>t.includes(e))).reduce(((t,o)=>Object.assign({},t,{[o]:e[o]})),{})}function Se(e){return Object.values?Object.values(e):Object.keys(e).map((t=>e[t]))}function Le(e=window.location.search){const t={};"?"===e[0]&&(e=e.substring(1));e.split("&").forEach((e=>{const[o,n]=e.split("=");if(o&&n)try{t[o]=decodeURIComponent(n)}catch(i){R(`Could not decode query param: ${e}`);t[o]=n}}));return t}function Oe(e){const t={};Object.keys(e).forEach((o=>{(e[o]||"number"==typeof e[o])&&(t[o]=e[o])}));return Object.keys(t).map((e=>`${e}=${encodeURIComponent(t[e])}`)).join("&")}function Ce(e){return"object"==typeof e&&Object.keys(e).length?`?${Oe(e)}`:""}function $e(e){return"true"===e||"1"===e}const De=["type","id","position","overlayDelaySeconds","preventSkip"];function Me(e){return De.map((t=>e[t]?String(e[t]):"")).join("_")}function xe(e){const t=Ve(),n=t&&"number"==typeof t.page_id?t.page_id:Ge(),i=window.location.origin||`${window.location.protocol}//${window.location.hostname}`,r=Object.assign({},Te(e,o),{parentOrigin:i,pageId:n,locale:je()});r.parentOrigin||ve(`window.location is missing - ${document.documentURI}`);I()&&(r.debug=!0);Fe()&&(r.playerType=c.EDITOR_PREVIEW);const s=Le();Ke().hidePosterImage&&(r.hidePosterImage=!0);s._hsVideoForm?e.conversionAsset={type:l.FORM,position:d.PRE,id:s._hsVideoForm}:s._hsVideoCta&&(e.conversionAsset={type:l.CTA,position:d.PRE,id:s._hsVideoCta});"object"==typeof e.conversionAsset&&e.conversionAsset.type&&e.conversionAsset.id&&(r.ca=Me(e.conversionAsset));if(r.playButtonColor){r.playButtonColor=r.playButtonColor.replace("#","");"ffffff"===r.playButtonColor&&delete r.playButtonColor}1===r.playbackRate&&delete r.playbackRate;"100%"===e.height&&("100%"===e.width||e.full_width)&&(r.objectFit="cover");return r}function ke(e,t,o={},n,i,r){let s="video";if(e&&t){const o=(null==i?void 0:i.playerType)===c.ACADEMY_IN_APP||(null==i?void 0:i.playerType)===c.ACADEMY_EMBEDDED;s=A()&&!o?`video/${e}/id/${t}`:`v/${e}/id/${t}`}const a={};if(n){a.hsvid=n;a.t=Date.now();r&&(a.afterPreload=!0)}const l=Ce(a).replace("?","#");return`${v(i)}/${s}${Ce(o)}${l}`}function Ve(){return window.hsVars?window.hsVars:null}function Ne(){const e=k();return e&&e.dataset.hsPortalId?Number(e.dataset.hsPortalId):Ve()?Ve().portal_id:V()}function qe(){const e=k();if(e&&e.dataset.hsEnv)return"qa"===e.dataset.hsEnv;const t=Ve();return!(!t||!t.app_hs_base_url)&&t.app_hs_base_url.includes("hubspotqa.com")}function Ye(){const e=k();if(A()){const e=window.location.hostname.split(".")[0];if(e.includes("-"))return e.split("-")[1]}if(e&&e.dataset.hsRegion)return e.dataset.hsRegion;const t=Ve();if(t&&t.app_hs_base_url){const e=t.app_hs_base_url.split("//")[1].split(".")[0];return e.includes("-")?e.split("-")[1]:null}return null}function Ue(){var e;const t=k();return null!==(e=Ve())&&void 0!==e&&e.scp_id?parseInt(Ve().scp_id,10):t&&t.dataset.hsPageId?Number(t.dataset.hsPageId):Ve()?Ve().page_id:null}function je(){return Ve()?Ve().language:null}function Fe(){return Boolean(window.hsInEditor)}function Be(){return window.location.pathname.startsWith(i)}function He(){const e=k();return(null==e?void 0:e.dataset.hsExternal)&&$e(e.dataset.hsExternal)}const We="hs-content-id-";function Ge(){let e=null;document.body.classList.forEach((t=>{t.includes(We)&&(e=parseInt(t.replace(We,""),10))}));return e||null}function Ke(){return window.hsVideoOptions||{}}function Qe(){const e={pageUrl:window.location.href,pageTitle:document.title,pageId:Ue()};He()?e.pageId=s:Be()&&(e.pageId=r);if("number"==typeof e.pageId)return e;if(!A())if(Ge()){e.pageId=Ge();ve("Missing expected hsVars context, parsed pageId from body classname")}else ve("Missing expected hsVars context");return e}const Je='\n  <div class="hsv-overlay-close" aria-label="Close" role="button" data-action="close"\n       style="position: absolute; display: block; top: 15px; right: 15px; width: 16px; height: 16px; background: transparent; cursor: pointer">\n    <svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg" style="position: absolute; top: 0; stroke: white; stroke-width: 2px">\n      <path d="M14.5,1.5l-13,13m0-13,13,13" transform="translate(-1 -1)"></path>\n    </svg>\n    <span style="position: absolute; padding: 20px; border-radius: 100%; top: -12px; left: -12px; background: rgba(255, 255, 255, 0.1)" />\n    <style>\n      .hsv-overlay-close > span { display: none; }\n      .hsv-overlay-close:hover > span { display: block; }\n    </style>\n  </div>\n',ze=e=>/^\d+$/.test(e);function Xe(e,t){const o=document.createElement("div");o.innerHTML=Je;o.querySelector(".hsv-overlay-close").addEventListener("click",(()=>e()));t.appendChild(o.firstElementChild)}function Ze(e,t){return ze(t.id)?`\n    <div class="hsv-cta-wrapper hsv-overlay" style="position: absolute; display: flex; width: 100%; height: 100%;\n                                        align-items: center; justify-content: center;">\n      <div class="hs-cta-embed hs-cta-simple-placeholder hs-cta-embed-${t.id}">\n        <a target="_blank" rel="noopener noreferrer">\n          <img\n            alt="Video CTA"\n            src="${et(t.id,e)}"\n          />\n        </a>\n      </div>\n      ${t.preventSkip?"":Je}\n    </div>\n    `:`\n    <div class="hsv-cta-wrapper hsv-overlay" style="position: absolute; display: flex; width: 100%; height: 100%;\n                                        align-items: center; justify-content: center;">\n        <span class="hs-cta-node hs-cta-${t.id}" id="hs-cta-${t.id}">\n          <a target="_blank" rel="noopener noreferrer">\n            <img\n              class="hs-cta-img"\n              id="hs-cta-img-${t.id}"\n              alt="Video CTA"\n              src="${et(t.id,e)}"\n            />\n          </a>\n        </span>\n        ${t.preventSkip?"":Je}\n      </div>\n    `}function et(e,t){let o=`//no-cache.${y()?"hubspotqa.com":"hubspot.com"}`;Ye()&&(o=y()?`//hubspot-no-cache-${Ye()}-qa.s3.amazonaws.com`:`//hubspot-no-cache-${Ye()}-prod.s3.amazonaws.com`);return`${o}/cta/default/${t}/${ze(e)?`interactive-${e}`:e}.png`}function tt(e,o){const{id:n}=o,i=document.createElement("div");i.innerHTML=Ze(e.portalId,o);const r=i.firstElementChild;e.getWrapperEl().append(r);const s=()=>{e.postMessageToPlayer(t.CTA_SKIPPED);r.style.display="none"},a=()=>{e.postMessageToPlayer(t.CTA_CLICKED);r.style.display="none"},l=()=>{r.querySelector(".hsv-overlay-close")||Xe(s,r)},d=r.querySelector(".hsv-overlay-close");d&&d.addEventListener("click",s);const c=()=>{if(!window.hbspt||!window.hbspt.cta){ve("Could not load CTA JS");s();return}window.hbspt.cta._relativeUrls=!0;window.hbspt.cta.canonicalURL=window.location.href;const t={region:Ye()||Q,useNewLoader:!0,enforceTargetIsBlank:!0};y()&&(t.env="qa");e.el.querySelector(".hs-cta-node").addEventListener("click",a);window.hbspt.cta.load(e.portalId,n,t);window.hbspt.cta.loadQueue()},u=()=>{if(!window.__PRIVATE__HubspotCtaClient||"function"!=typeof window.__PRIVATE__HubspotCtaClient.loadCta){ve("Web interactive API not found after load");s();return}const e=r.querySelector(".hs-cta-simple-placeholder");window.hsCtasOnReady=window.hsCtasOnReady||[];window.hsCtasOnReady.push((()=>{window.__PRIVATE__HubspotCtaClient.loadCta({contentId:Number(o.id),options:{openInNewTab:!0,elementToEmbed:e,onNavigate:a}});window.HubSpotCallsToActions&&window.HubSpotCallsToActions.on("onCallToActionFormSubmitted",l)}))};if(ze(o.id))if(window.__PRIVATE__HubspotCtaClient)u();else{let e=`${window.location.origin}/hs/cta/web-interactives-embed.js`;A()&&(e=y()?"https://js.hubspotqa.com/web-interactives-embed.js":"https://js.hscta.net/web-interactives-embed.js");j(e,{id:"hubspot-web-interactives-loader",crossorigin:"anonymous","data-loader":"hs-scriptloader","data-hsjs-portal":Ne(),"data-hsjs-hublet":Ye()||Q}).then(u).catch((e=>{ve("Failed to load web interactive JS",{errorMessage:String(e)});s()}))}else if(window.hbspt&&window.hbspt.cta)c();else{let e=`${window.location.origin}/hs/cta/cta/current.js`;A()&&(e=y()?"https://js.hubspotqa.com/cta/current.js":"https://js.hscta.net/cta/current.js");j(e).then(c).catch((e=>{console.error("Failed to display CTA",e);ve("Failed to display CTA",{errorMessage:String(e)});s()}))}}let ot;function nt(){if(!ot)try{ot=window.scrollTo;window.scrollTo=(...e)=>{R("Prevented scrollTo with args:",...e)}}catch(e){R("Failed to patch window.scrollTo to prevent forms auto-scroll",e)}}function it(){if(ot){try{window.scrollTo=ot}catch(e){R("Failed to un-patch window.scrollTo to restore auto-scroll ability",e)}ot=void 0}}const rt="hsv-form-wrapper",st=9,at="Thanks for your response!";function lt(e){return`\n      <div class="hsv-overlay hsv-form-modal" style="position: absolute; top: 0; bottom: 0; left: 0; right: 0;">\n        <div class="${rt}" style="height: 100%; overflow-y: auto; padding: 20px 40px; text-align: left">\n          <div class="hsv-form" />\n        </div>\n        ${e.preventSkip?"":Je}\n      </div>\n  `}const dt=e=>{const t=e.querySelector("form");if(!t){R("Form el not found in onFormReady callback");return}const o=t.querySelector("div.actions");o&&F(o,{margin:0,padding:0})};function ct(e,o){let n,i=!1,r=!1,s=!1;const{id:a}=o,l=document.createElement("div");l.innerHTML=lt(o);const c=l.firstElementChild;e.getWrapperEl().append(c);const u=c.querySelector(".hsv-form"),h=()=>{it();e.postMessageToPlayer(i?t.FORM_SUBMITTED:t.FORM_SKIPPED,{isLegacyForm:r});c.style.display="none"},p=()=>{e.postMessageToPlayer(t.FORM_SUBMITTED,{isLegacyForm:r});c.style.display="none"},f=()=>{var e;it();s&&p();i=!0;const t=c.querySelector(".submitted-message")||u;c.querySelector(".hsv-overlay-close")||Xe(p,c);const n=`\n      <div style="padding: 10px 0 16px; background-color: #fff; text-align: center">\n        <a data-test-id="form-watch-video" style="cursor: pointer">\n          ${(null===(e=o.copy)||void 0===e?void 0:e.watchVideo)||"Watch video"}\n        </a>\n      </div>\n    `,r=document.createElement("div");r.innerHTML=n;r.querySelector("a").addEventListener("click",(()=>p()));setTimeout((()=>{t.append(r.firstElementChild)}),250)},m=e.el.querySelector(".hsv-overlay-close");m&&m.addEventListener("click",h);const g=()=>{if(window.HubSpotForms){nt();e.form=window.HubSpotForms.create({formId:a,portalId:e.portalId,env:y()?"qa":null,region:Ye(),target:`${e.getPlaceholderSelector()} .hsv-form`,css:"",onFormDefinitionFetchSuccess:e=>{n=e.form;if(n){n.formTypeNumber===st&&(r=!0);n.inlineMessage||(s=!0)}},onFormReady:()=>{const t=c.querySelector("form");t&&G(t)&&F(u,{background:"white",padding:"10px 20px"});dt(c);if(n.redirectUrl&&o.position!==d.POST){var i;R(`Overriding redirectUrl ${n.redirectUrl} with generic inlineMessage`);e.form.setContext({inlineMessage:(null===(i=o.copy)||void 0===i?void 0:i.defaultThankYouMessage)||at,redirectUrl:""})}},getExtraMetaDataBeforeSubmit:()=>({hs_video_id:e.options.id,hs_video_title:e.video?e.video.title:null}),onFormSubmitted:()=>setTimeout(f,0)});e.form.on("onRenderError",((t,o)=>{if("NON_EMBEDDABLE_EDITOR2_FORM"===o){document.addEventListener("hs-form-event:on-ready",(t=>{const o=window.HubSpotFormsV4.getFormFromEvent(t);null==o||o.setExtraSubmissionMetadata({hs_video_id:e.options.id,hs_video_title:e.video?e.video.title:null})}));document.addEventListener("hs-form-event:on-submission:success",(()=>{setTimeout(f,0)}))}}))}else{ve("Could not load Forms JS");h()}};if(window.HubSpotForms)g();else{j(`//js.${y()?"hsformsqa.net":"hsforms.net"}/forms/embed/v2.js`).then(g).catch((e=>{console.error("Failed to display form",e);ve("Failed to display form",{errorMessage:String(e)});h()}))}}const ut=[a.INITIAL,a.LOADING,a.READY],ht="video-embed-js",pt="hubl-iframe",ft=()=>window.performance.now?window.performance.now():null,mt=(e,t)=>{const o=e.filter((e=>"number"==typeof e.timings[t])).map((e=>e.timings[t]));return o.length?Math.round(Math.min(...o)):null},gt=e=>{let t=ht;e.some((e=>e.options.renderContext&&e.options.renderContext.startsWith("hubl-iframe")))&&(t=pt);return{embedType:t,embedVersion:1,firstVideoLoadedAt:mt(e,"loadedAfterMs"),firstVideoReadyAt:mt(e,"readyAfterMs"),firstVideoPlayedAt:mt(e,"playedAfterMs"),numHsVideos:e.length,numAutoplay:e.filter((e=>e.options.autoplay)).length,numInitiallyVisible:e.filter((e=>e.initiallyVisible)).length,numInteractedWith:e.filter((e=>!ut.includes(e.status))).length,secondsOfVideoPlayed:e.reduce(((e,t)=>e+(t.timings.secondsViewed||0)),0)}},Et="hsv",bt="ca",yt=["id","width","height"],vt={fullWidth:"full_width"},wt=[".slick-slide.slick-cloned",".swiper-slide-duplicate"],At=e=>`${e[0].toLowerCase()}${e.slice(1)}`;function Pt(e){let t=e.querySelector("img[data-hsv-id]");t||(t=e.querySelector("iframe[data-hsv-src]"));if(!t)return null;const o=Object.assign({},t.dataset),n={embedId:e.dataset.hsvEmbedId};Object.keys(o).forEach((e=>{let t=o[e];(e=At(e.replace(Et,"")))in vt&&(e=vt[e]);"true"===t?t=!0:"false"===t?t=!1:yt.includes(e)&&(e.includes("%")||Number.isNaN(Number(t))||(t=Number(t)));if(e.startsWith("ca")){e=At(e.replace(bt,""));n.conversionAsset=n.conversionAsset||{};"overlayDelaySeconds"===e&&(t=Number(t));n.conversionAsset[e]=t}else n[e]=t}));return n}function _t(e){return!wt.some((t=>H(e,t)))}function It(e=document.body){const t=x(e,C).filter((e=>e.querySelector("img[data-hsv-id]"))),o=t.filter(_t);o.length!==t.length&&R(`Found only ${o.length} valid placeholders out of ${t.length} total.`,t);const n=o.map(Pt),i={};o.forEach(((e,t)=>{const o=n[t];o&&o.embedId&&(i[o.embedId]={id:o.embedId,el:e,options:o})}));Object.keys(i).length!==n.length&&R(`Found only ${Object.keys(i).length} unique embedIds for ${n.length} placeholders.`,o);return Se(i)}function Rt(e=document.body){return x(e,C).filter((e=>e.querySelector($))).map((e=>({el:e,options:Pt(e)})))}class Tt{constructor(e,o,i,r){this.status=a.INITIAL;this.confirmedVisible=!1;this.initiallyVisible=!1;this.preloaderIframeLoaded=!1;this.iframeLoaded=!1;this.getWrapperEl=()=>this.el.matches(".hs-video-wrapper")?this.el:this.el.querySelector(".hs-video-wrapper");this.injectPlayer=()=>{const{options:e,placeholderEl:t}=this;if(t.querySelector($))this.iframeEl=t.querySelector($);else{if(this.selectIframeElFromPage()){ve("injectPlayer found iframe el on page via selector, not inserting again.");this.replaceIframeFromPage();return}if(!t){ve("injectPlayer cannot find placeholder, no way to render!");return}this.injectIframe(t);t.setAttribute("data-hsv-status","rendered");e.altText&&(this.iframeEl.title=e.altText)}if(A()||e.playerType===c.IN_APP_PREVIEW||e.playerType===c.EDITOR_PREVIEW||e.autoplay)this.onConfirmVisible();else{setTimeout((()=>this.confirmRendered()),n);if(window.IntersectionObserver)try{this.setupIntersectionObserver()}catch(e){this.log("Failed to setup IntersectionObserver",e);ve("Failed to setup IntersectionObserver",{err:String(e)});this.onConfirmVisible()}else{ve("Missing IntersectionObserver constructor");this.onConfirmVisible()}}};this.injectIframe=e=>{e.appendChild(this.el);const t=e.querySelector("img[data-hsv-id]");if(t&&t.src){this.el.style.backgroundImage=`url(${t.src})`;this.el.style.backgroundSize="contain";this.el.style.backgroundRepeat="no-repeat";this.el.style.backgroundPosition="center"}this.hidePlaceholderImage()};this.hidePlaceholderImage=()=>{const e=this.placeholderEl.querySelector("img[data-hsv-id]");e&&e.style.setProperty("display","none","important")};this.on=(e,t)=>{this.eventTarget?this.eventTarget.addEventListener(e,t):console.log("Browser does not support EventTarget API, on is a no-op.")};this.trigger=e=>{this.eventTarget&&this.eventTarget.dispatchEvent(e)};this.onConfirmVisible=()=>{const e=this.iframeEl.getAttribute("data-hsv-src");if(e){const[t]=e.split("#"),o=t.split("?");let n=o[0];const i=Le(o[1]||""),r=Le();i.parentOrigin=window.location.origin;i.renderContext=this.options.renderContext;i.locale=je();r._hsVideoForm&&!i.ca?i.ca=Me({type:l.FORM,position:d.PRE,id:r._hsVideoForm}):r._hsVideoCta&&!i.ca&&(i.ca=Me({type:l.CTA,position:d.PRE,id:r._hsVideoCta}));b()&&(n=n.replace("play","local"));this.iframeEl.src=`${n}?${Oe(i)}#hsvid=${this.id}`;this.iframeEl.removeAttribute("data-hsv-src")}else{const e=this.iframeEl.getAttribute("src");if(!e||!/http(s?):/.test(e)){this.hidePlaceholderImage();this.iframeEl.src=this.buildIframeUrl();this.el.style.backgroundImage="none"}}this.status=a.LOADING;this.postMessageToPlayer(t.CONFIRM_VISIBLE);this.confirmedVisible=!0};this.log=(...e)=>{R(`(${this.id})`,...e)};this.id=e;this.portalId=o;this.options=i;this.outgoingMessages=[];this.receivedMessages=[];this.timings={constructedAt:ft()};this.placeholderEl=r||q(this.id,!0);this.el=this.createPlayerIframe();this.iframeEl=this.el.querySelector("iframe");if(window.EventTarget)try{this.eventTarget=new EventTarget}catch(e){R("Cannot construct EventTarget, cannot support event handler API.",e)}}createPlayerIframe(){const{id:t,options:o,placeholderEl:n}=this;if(n&&n.querySelector($)&&n.querySelector(".hs-video-wrapper")){R(`Found server-rendered iframe for player ${t}`,o,n);return n.querySelector(".hs-video-wrapper")}R(`Rendering iframe for player ${t}`,o,n);const i="100%"===o.height&&("100%"===o.width||o.full_width);let r="",s="",a=o.style||"",l="";if(i)s=r="position: absolute; width: 100%; height: 100%";else{const t="string"==typeof o.width?Number(o.width):o.width;let n="string"==typeof o.height?Number(o.height):o.height;const i=t&&n?n/t*100:100*e;if("number"==typeof o.maxHeight){n=o.maxHeight;l=`max-height: ${o.maxHeight}px`}let d=t?`max-width: ${t}px; `:"";const c=n&&o.maxHeight&&n>=o.maxHeight?`max-height: ${o.maxHeight}px; `:"";if("boolean"==typeof o.full_width){a||(a="margin: 0 auto;");o.full_width&&(d="")}r=`${d} ${c} ${a}`;s=`position: relative; height: 0; padding-bottom: ${i}%;`}const d=document.createElement("div");d.innerHTML=`\n    <div class="hs-video-container" style="${r.trim()}">\n      <div class="hs-video-wrapper" style="${s.trim()}">\n        <iframe id="hs_player_${t}"\n          loading="lazy"\n          referrerPolicy="origin"\n          sandbox="allow-forms allow-scripts allow-same-origin allow-popups"\n          allow="autoplay; fullscreen;"\n          style="position: absolute !important; width: 100% !important; height: 100% !important; left: 0; top: 0; border: 0 none; pointer-events: initial; ${l}">\n        </iframe>\n      </div>\n    </div>\n  `;return d.firstElementChild}getPlaceholderSelector(){return`[data-hsv-embed-id="${this.id}"]`}findPlaceholderEls(){return M(this.getPlaceholderSelector())}findOtherPlaceholderEls(){return this.findPlaceholderEls().filter((e=>e!==this.placeholderEl&&_t(e)))}selectIframeElFromPage(){const e=M(`iframe#hs_player_${this.id}`);if(e.length>1){R("Found multiple iframes for player",e);ve("Found multiple iframes for player")}return e[0]}confirmRendered(){if(document.contains(this.el))return;if(this.selectIframeElFromPage()){ve("confirmRendered found new iframe el on page via selector.");this.replaceIframeFromPage();return}const e=this.findOtherPlaceholderEls();e.length?ve("confirmRendered found duplicate placeholders for player",{embedId:this.id,otherPlaceholderCount:e.length}):ve("confirmRendered could not find player el and exhausted options to render!")}buildIframeUrl(){const e=xe(this.options);return ke(this.portalId,this.options.id,e,this.id,this.options,this.preloaderIframeLoaded)}isIframeLoaded(){return this.iframeLoaded}getReadyQueue(){return this.outgoingMessages}onMessageReceived(e,o){R(`Received message from player ${this.id}`,e,o);this.receivedMessages.push([e,o]);switch(e){case t.VIDEO_LOADED:this.video=o;this.handleVideoLoaded(this.video);this.trigger(new Event("videoLoaded"));break;case t.PLAYER_LOADED:this.executeReadyQueue();this.placeholderEl.setAttribute("data-hsv-status","loaded");this.timings.loadedAfterMs=ft();this.trigger(new Event("loaded"));break;case t.PLAYER_READY:this.status=a.READY;this.placeholderEl.setAttribute("data-hsv-status","ready");this.timings.readyAfterMs=ft();this.trigger(new Event("ready"));break;case t.PLAYER_PLAY:this.status=a.PLAYING;this.placeholderEl.setAttribute("data-hsv-status","playing");this.timings.playedAfterMs=ft();this.trigger(new Event("play"));break;case t.PLAYER_PROGRESS:if(o&&"object"==typeof o&&"currentTime"in o){const e=o.currentTime,t=o.textLanguage,n=new CustomEvent("progress",{detail:{currentTime:e,textLanguage:t}});this.trigger(n)}break;case t.PLAYER_TIME_UPDATE:if(o&&"object"==typeof o&&"currentTime"in o){const e=o.currentTime,t=new CustomEvent("timeupdate",{detail:{currentTime:e}});this.trigger(t)}break;case t.SET_PLAYBACK_RATE:if(o&&"object"==typeof o&&"playbackRate"in o){const e=o.playbackRate,t=new CustomEvent("ratechange",{detail:{playbackRate:e}});this.trigger(t)}break;case t.TRIGGER_AUTOPLAY:{const e=new CustomEvent("autoplaytoggle");this.trigger(e);break}case t.PLAYER_SECONDS_VIEWED:o&&"object"==typeof o&&"number"==typeof o.secondsViewed&&(this.timings.secondsViewed=o.secondsViewed);break;case t.PLAYER_PAUSE:this.status=a.PAUSED;this.placeholderEl.setAttribute("data-hsv-status","paused");this.trigger(new Event("pause"));break;case t.PLAYER_ENDED:this.status=a.ENDED;this.placeholderEl.setAttribute("data-hsv-status","ended");this.trigger(new Event("ended"));break;case t.PLAYER_SHOW_OVERLAY:{const e=o||this.options.conversionAsset;if(!(e&&e.type&&e.id)){ve("Unexpected PLAYER_SHOW_OVERLAY message");break}this.status=a.CONVERSION_ASSET_OVERLAY;this.placeholderEl.setAttribute("data-hsv-status",`${e.type.toLowerCase()}-overlay`);if(e.type===l.CTA)try{tt(this,e)}catch(e){ve("Error thrown rendering CTA")}else if(e.type===l.FORM)try{ct(this,e)}catch(e){ve("Error thrown rendering form")}break}case t.PLAYER_ORPHANED:ve("Player did not receive SET_PAGE_META postMessage",{iframeUrl:this.iframeEl.src});break;case t.PLAYER_ERROR:ve("In-app player reported error",{iframeUrl:this.iframeEl.src});this.trigger(new CustomEvent("error",{detail:o}))}}handleVideoLoaded(e){this.iframeEl.title||(this.iframeEl.title=e.altText||e.title)}triggerPlay(){this.postMessageToPlayer(t.SET_PLAYER_STATUS,{status:a.PLAYING})}triggerPause(){this.postMessageToPlayer(t.SET_PLAYER_STATUS,{status:a.PAUSED})}postMessageToPlayer(e,t=null,o=!0){if(this.iframeLoaded){this.iframeEl.contentWindow||this.replaceIframeFromPage();if(this.iframeEl.contentWindow){this.sendMessage(e,t);return}R(`Could not access contentWindow for player ${this.id}`,e,t)}if(o){R(`Queuing postMessage for player ${this.id}`,e,t);this.outgoingMessages.push([e,t])}}sendMessage(e,o){this.iframeEl.contentWindow||this.replaceIframeFromPage();if(this.iframeEl&&this.iframeEl.contentWindow){R(`Sending postMessage to player ${this.id}`,e,o);o&&"object"==typeof o&&e===t.SET_UTK&&"utk"in o&&(this.utk=o.utk);try{this.iframeEl.contentWindow.postMessage({type:e,payload:o},v(this.options))}catch(e){this.log("Failed to postMessage player",e)}}else R(`sendMessage could not access contentWindow for player ${this.id}`,e,o)}replaceIframe(e){this.iframeEl=e;try{this.intersectionObserver.observe(this.iframeEl)}catch(e){this.onConfirmVisible()}}replaceIframeFromPage(){const e=this.selectIframeElFromPage();if(e){R("Replacing iframeEl from page with ",this.iframeEl,this.iframeEl===e);this.iframeEl=e}}executeReadyQueue(){if(this.outgoingMessages.length){if(this.iframeLoaded){R(`Player ${this.id} reloaded, executing readyQueue of length ${this.outgoingMessages.length}`);if(this.utk){const{utk:e}=this;this.sendMessage(t.SET_UTK,{utk:e})}}else R(`Executing readyQueue of length ${this.outgoingMessages.length} for player ${this.id}`);this.outgoingMessages.forEach((([e,t])=>{this.sendMessage(e,t)}))}this.iframeLoaded=!0}setupIntersectionObserver(){if(W(this.el)){this.initiallyVisible=!0;this.onConfirmVisible()}else{this.intersectionObserver=new IntersectionObserver((e=>{e.forEach((e=>{this.log("IntersectionObserver entry",e);if(e.isIntersecting){this.log("Found player in viewport via IntersectionObserver");this.onConfirmVisible();this.intersectionObserver.disconnect()}}))}),{rootMargin:"100px",threshold:0});this.intersectionObserver.observe(this.el)}}}function St(e,o){if(e&&e.data&&"object"==typeof e.data&&Object.keys(t).includes(e.data.type)){o&&e.origin&&e.origin!==o&&R("isPlayerMessage saw unexpected origin",e);return!0}return!1}function Lt(e,t,{placeholderEl:o}={}){!o&&t.embedId&&((o=q(e,!0))?t.renderContext="embed-id-selector":R(`Failed to find for embedId: ${t.embedId} for player: ${e}`));const n=t.portalId||Ne();n&&t.id||ve("Required param `portalId` or video `id` missing");if(Fe()){t.playerType=c.EDITOR_PREVIEW;t.renderContext="editor-preview"}const i=new Tt(e,n,t,o);i.injectPlayer();return i}function Ot(e,t){const o=t.portalId||Ne(),n=xe(t),i=ke(o,t.id,n,e.id,t);if(t.conversionAsset&&e.options.conversionAsset&&t.conversionAsset.id!==e.options.conversionAsset.id){const t=e.el.querySelector(".hsv-overlay");t&&t.remove()}R(`Updating src of existing iframe for player ${e.id}`,t);e.options=t;e.iframeEl.src=i;t.altText&&(e.iframeEl.title=t.altText);return e}function Ct(e,t,o,n=!0){Se(e).forEach((e=>{e.postMessageToPlayer(t,o,n)}))}function $t(e){window.addEventListener("message",(o=>{if(St(o,v())){const{data:n}=o,{type:i,embedId:r,payload:s={}}=n,l=e[r];if(!l){console.warn(`Could not find embedId ${r}`,n);return}l.onMessageReceived(i,s);if(!(i!==t.PLAYER_PLAY||l.options.autoplay&&s.isInitial)){const t=Se(e).filter((e=>e!==l&&e.status===a.PLAYING));t.length&&R(`Pausing ${t.length} other currently playing players`,t);t.forEach((e=>e.triggerPause()))}if(i===t.PLAYER_ANALYTICS_EVENTS){const e=JSON.parse(s);e.events&&e.events.length&&window._hsq&&e.events.forEach((e=>window._hsq.push(e)))}}}))}function Dt(){const e=({id:e})=>{const t=document.querySelector(`.hs-form-${e}.submitted-message`);if(t){const e=It(t);R(`Found ${e.length} players in form thank you message`);e.forEach((({el:e,options:t})=>{t.renderContext="form-inline-message";window.hsVideoApi.renderPlayer(e,t)}))}};window.addEventListener("message",(t=>{if(t.data&&"hsFormCallback"===t.data.type&&"onFormSubmitted"===t.data.eventName){R("Form submitted",t.data);setTimeout((()=>e(t.data)))}}))}function Mt(){if(!window.MutationObserver)return null;const e=new MutationObserver((e=>{e.forEach((e=>{if(!e.addedNodes.length)return;const t=[...e.addedNodes].filter((e=>e instanceof Element&&(e.matches($)||e.matches(D))));e.addedNodes.forEach((e=>{e instanceof Element&&t.push(...e.querySelectorAll($),...e.querySelectorAll(D))}));if(t.length){R("Found server-rendered iframes via MutationObserver:",t);ve("Found server-rendered iframes via MutationObserver (leaving here for debugging)");t.forEach((e=>{const t=B(e,".hs-video-widget[data-hsv-embed-id]");if(!t||!t.dataset.hsvEmbedId)return;const o=window.hsVideoApi.getPlayer(t.dataset.hsvEmbedId);if(o&&e.matches(D)){R(`Moving player ${t.dataset.hsvEmbedId} to new iframe: `,e);o.replaceIframe(e)}else{const e=Pt(t);if(null!=e&&e.embedId){e.renderContext="hubl-iframe";window.hsVideoApi.renderPlayer(t,e)}}}))}}))}));try{e.observe(document.body,{childList:!0,subtree:!0})}catch(e){ve("Failed to create MutationObserver")}return e}function xt(){document.addEventListener("securitypolicyviolation",(e=>{R("SecurityPolicyViolationEvent event",e);const{blockedURI:t,disposition:o}=e;e.blockedURI&&L.test(t)&&ve(`CSP ${o} blocked video-embed JS`,{blockedURI:t});e.blockedURI&&e.blockedURI.includes(v())&&ve(`CSP ${o} blocked player iframe load`,{blockedURI:t})}))}let kt=1;function Vt(e="uniq"){return`${e}${kt++}`}let Nt=!1;function qt({testingMode:e=!1}={}){const o=window._hsq=window._hsq||[],n=window._hsp=window._hsp||[],i=[],r={};let s,a;const l=e=>Boolean(r[e]),d=e=>Boolean(r[e]&&r[e].confirmedVisible),c=e=>i.find((([t])=>e===t));function u(...e){let t,o,n;ve("registerPlayer still being called");if("string"==typeof e[0]){t=e[0];o=e[1];o.embedId=t||Vt()}else if(e[0]instanceof HTMLElement){n=e[0];o=e[1];t=o.embedId||Vt()}else{if("object"!=typeof e[0]){console.warn("invalid args passed to `registerPlayer`",e);return}o=e[0];t=o.embedId||Vt()}if(c(t)||l(t))R(`Player with embedId: ${t} already exists, ignoring call to registerPlayer`,o);else{if(Y()){!n&&o.embedId&&(n=q(t));if(n){m(n,o);return}}i.push([t,o])}}function h(){return!!s&&(s.categories?s.categories.analytics:s.allowed)}function p(e){Ct({[e]:r[e]},t.SET_PAGE_META,Qe());a&&h()&&!A()&&Ct({[e]:r[e]},t.SET_UTK,{utk:a})}function f(e,t,o){r[e]=Lt(e,t,o);A()||p(e);return r[e]}function m(e,t){let o,n;if("string"==typeof e){o=e;n=q(o);if(!n){console.warn(`Element id ${e} not found`);return null}}else{if(!(e instanceof HTMLElement)){console.warn("First argument to renderPlayer must be an id string or HTMLElement");return null}o=t.embedId||Vt();n=e}if(l(o)&&d(o)){R(`Player with embedId: ${o} already exists, ignoring call to renderPlayer`,t);return null}return f(o,t,{placeholderEl:n})}function g(e,t){const o=w(e);if(!o){R(`Could not find player id ${e} to update`);return null}Ot(o,t);return o}function E(e){a=e;if(s&&a)if(h()){R(`Received utk ${a} privacyConsent`,JSON.stringify(s));Ct(r,t.SET_UTK,{utk:a})}else{R("Received privacyConsent but not allowed",a,s);Ct(r,t.SET_UTK,null)}else R("Could not obtain utk cookie and privacyConsent",a,s)}function b(){n.push(["addPrivacyConsentListener",e=>{s=e;o.push(["addUserTokenListener",E])}])}function v(){return r}function w(e){return v()[e]}function P(){return Se(r).reduce(((e,t)=>{t.receivedMessages.forEach((o=>{e.push([t.id,o[0],o[1]])}));return e}),[])}function _(){Se(r).forEach((e=>e.triggerPause()))}function T(){It().forEach((({el:e,options:t})=>{if(t.embedId){t.renderContext=H(e,".widget-type-rich_text")?"rich-text-placeholder":"onload-placeholder";Be()&&(t.renderContext="share-page");f(t.embedId,t,{placeholderEl:e})}}));Rt().forEach((({el:e,options:t})=>{if(t.embedId){t.renderContext=Be()?"hubl-iframe-share-page":"hubl-iframe";f(t.embedId,t,{placeholderEl:e})}}))}function S(){setTimeout((()=>{const e=Object.values(v()).find((e=>e.confirmedVisible));e?R("Not inserting preloader iframe as at least one player is already visible & loading:",e):K((()=>{Object.values(v()).forEach((e=>{e.preloaderIframeLoaded=!0}))}))}),500)}function L(){i.forEach((([e,t])=>{f(e,t)}));$t(r);Nt=!0;if(!A()){S();b();T();xt();Dt();Mt();window._hsVideoReady&&Array.isArray(window._hsVideoReady)&&setTimeout((()=>window._hsVideoReady.forEach((e=>e()))))}}if(Nt&&!e)R("loader already initialized, not listening for document load");else if(Y())try{L()}catch(e){we(e,{source:"already-loaded"})}else{document.addEventListener("DOMContentLoaded",(()=>{try{L()}catch(e){we(e,{source:"DOMContentLoaded"})}}));window.addEventListener("content-analytics-code-not-loaded",(()=>E(null)))}const O={registerPlayer:u,renderPlayer:m,updatePlayer:g,getPlayer:w,getPlayers:()=>Se(v()),getPerformanceMetrics:()=>gt(Object.values(r)),pauseAllPlayers:_};return e||I()||y()?Object.assign({},O,{getPlayerMessages:P,triggerLoad:L,renderPlaceholders:T}):O}let Yt=window.hsVideoApi;Yt?R("hsVideoApi found on page, not calling createLoader"):window.hsVideoApi=Yt=qt();Yt.renderPlayer,Yt.updatePlayer}();
//# sourceMappingURL=//static.hsappstatic.net/video-embed/static-1.32306/bundles/loader.js.map